
private static double clamp(double n, double min, double max) {
    return (n >= max) ? max : (n <= min) ? min : n;
}